<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="../Font-Awesome-3.2.1/Font-Awesome-3.2.1/css/font-awesome.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../css/userDocument.css"/>
    <link rel="stylesheet" href="../css/headerAndFooter.css">
    <title>消息中心</title>
    <link rel="stylesheet" href="../css/newMessage.css">
</head>
<body>
    <header>
        <nav class="header">
            <img class="logo" src="../images/homePage-logo.png"/><!--logo-->
            <a class="items" href="homePage.html">首页</a>
            <a class="items" href="equipmentExplore.html">设备探索</a>
            <a class="items" href="hardwaresShow.html">硬件展示</a>
            <a class="items" href="userHelp.html">帮助文档</a>
    
            <div class="unlogin">
                <a id="registerBtn" href="register.html">注册</a>
                <a id="loginBtn" href="login.html">登录</a>
            </div>

            <div class="logined">
                <a class="developerBtn" href="equipmentList.html">我的设备</a>
                <a class="developerBtn" href="userManage.html">开发者中心</a>
                <a class="icon-bell bell" href="newMessage.html"></a>
                <a class="icon-user user" href="userDocument.html"></a>
            </div>
        </nav>
    </header>

<div class="showMessage"></div>
<script type="text/jsrender" id="showMessage">
    {{for messageContent}}
        <div class="news">{{:data}}</div>
    {{/for}}
</script>
<script src="../js/jquery.min.js"></script>
<script src="../common.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/0.9.90/jsrender.js"></script>
<script>
   $(function(){
       var userId = getCookie("userId");
       if(userId){
           $('.logined').css('display','inline-block');
           $('.unlogin').css('display','none');
       }else{
           $('.unlogin').css('display','inline-block');
           $('.logined').css('display','none');
       }
       userId = '4657c0733c5048a79e7555574a1dc564';
       var params = {};
       params.userId = userId;
       function showNews(){
           console.log(1);
           $.post(ip+'user/message',params,function(json){
               console.log(json);
               if(json.type === "COMMON_SUC"){
                   var template1 = $.templates("#showMessage");
                   var htmlOutput1 = template1.render(message);
                   $(".showMessage").html(htmlOutput1);
               }else if(json.type === ""){

               }
           })
       }
       showNews();
       setInterval(showNews,60000);
   })
</script>
</body>
</html>